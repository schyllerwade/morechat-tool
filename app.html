<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compress Conversation - MoreChat.ai</title>
    <meta name="description" content="Paste your AI conversation and get an intelligent compressed summary for handoff.">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Token Counter Styles */
        .token-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin: 24px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-radius: 12px;
            border: 2px solid #d1d5db;
        }

        .metric-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .metric-label {
            font-size: 12px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: #1f2937;
        }

        .metric-subtext {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 4px;
        }

        .metric-card.success {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 1px solid #6ee7b7;
        }

        .metric-card.success .metric-value {
            color: #059669;
        }

        .metric-card.success .metric-label {
            color: #047857;
        }

        /* Compression Meter */
        .compression-meter-container {
            margin: 24px 0;
            padding: 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
        }

        .meter-title {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .meter-percentage {
            font-size: 16px;
            font-weight: 700;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .meter-bar-background {
            width: 100%;
            height: 24px;
            background: #f3f4f6;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            margin-bottom: 8px;
        }

        .meter-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 12px;
            width: 100%;
            transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .meter-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .meter-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 12px;
        }

        .stat-item {
            padding: 8px 12px;
            background: #f9fafb;
            border-radius: 6px;
            font-size: 12px;
        }

        .stat-label {
            color: #6b7280;
            font-weight: 500;
        }

        .stat-value {
            color: #1f2937;
            font-weight: 700;
            font-size: 14px;
            margin-top: 2px;
        }

        .stat-value.savings {
            color: #10b981;
        }

        /* Loading animation for meter */
        .meter-bar-fill.loading {
            animation: pulse-width 2s ease-in-out infinite;
        }

        @keyframes pulse-width {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        /* Token info box */
        .token-info-box {
            padding: 12px 16px;
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            border-radius: 6px;
            font-size: 13px;
            color: #1e40af;
            margin: 12px 0;
            display: none;
        }

        .token-info-box.show {
            display: block;
        }

        .token-info-box strong {
            color: #1e3a8a;
        }

        /* Hide metrics by default */
        .token-metrics {
            display: none;
        }

        .token-metrics.show {
            display: grid;
        }

        .compression-meter-container {
            display: none;
        }

        .compression-meter-container.show {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .token-metrics {
                grid-template-columns: repeat(2, 1fr);
            }

            .metric-value {
                font-size: 24px;
            }

            .meter-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="logo">
                    <span class="logo-icon">üí¨</span>
                    <span class="logo-text">MoreChat.ai</span>
                </a>
                <a href="index.html" class="btn btn-secondary">‚Üê Back to Home</a>
            </div>
        </div>
    </nav>

    <!-- App Section -->
    <section class="app-section">
        <div class="container-wide">
            <div class="app-header">
                <h1>Compress Your Conversation</h1>
                <p>Paste your AI conversation below and we'll create an intelligent summary for handoff.</p>
            </div>

            <!-- Input Section -->
            <div class="app-container" id="inputSection">
                <div class="app-main">
                    <div class="input-panel">
                        <label for="conversationInput" class="input-label">
                            <span class="label-text">Your Conversation</span>
                            <span class="label-hint">Paste the entire chat thread from any AI chatbot</span>
                        </label>
                        <textarea 
                            id="conversationInput" 
                            class="conversation-input" 
                            placeholder="Paste your conversation here...

Example:
Human: I want to build a web app
AI: Great! What kind of app are you thinking about?
Human: Something that helps people...
AI: That's interesting! Let me help you...

(Continue with your full conversation)"
                        ></textarea>
                        <div class="input-stats">
                            <span id="wordCount">0 words</span>
                            <span id="charCount">0 characters</span>
                            <span id="tokenCount" style="color: #6366f1; font-weight: 600;">0 tokens</span>
                        </div>
                    </div>

                    <div class="settings-panel">
                        <h3 class="settings-title">Compression Settings</h3>
                        
                        <div class="setting-group">
                            <label for="targetAI" class="setting-label">Target AI Platform</label>
                            <select id="targetAI" class="setting-select">
                                <option value="general">Any AI (General)</option>
                                <option value="chatgpt">ChatGPT</option>
                                <option value="claude">Claude</option>
                                <option value="deepseek">DeepSeek</option>
                                <option value="gemini">Gemini</option>
                                <option value="perplexity">Perplexity</option>
                            </select>
                            <span class="setting-hint">We'll optimize the summary for your target platform</span>
                        </div>

                        <div class="setting-group">
                            <label for="compressionLevel" class="setting-label">Compression Level</label>
                            <select id="compressionLevel" class="setting-select">
                                <option value="light">Light (30% reduction)</option>
                                <option value="balanced" selected>Balanced (50% reduction)</option>
                                <option value="aggressive">Aggressive (70% reduction)</option>
                                <option value="extreme">Extreme (85% reduction)</option>
                            </select>
                            <span class="setting-hint">Higher compression = shorter summary</span>
                        </div>

                        <div class="setting-group">
                            <label class="setting-label">API Configuration</label>
                            <div class="api-options">
                                <div class="api-option">
                                    <input type="radio" id="useOwnKey" name="apiOption" value="own" checked>
                                    <label for="useOwnKey">
                                        <strong>Use My API Key (Free)</strong>
                                        <span class="api-hint">Unlimited compressions, you pay OpenAI directly (~$0.002 each)</span>
                                    </label>
                                </div>
                                <div class="api-option">
                                    <input type="radio" id="useOurService" name="apiOption" value="service">
                                    <label for="useOurService">
                                        <strong>Use Our Service ($0.10)</strong>
                                        <span class="api-hint">No API key needed, we handle everything</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="setting-group" id="apiKeyGroup">
                            <label for="apiKey" class="setting-label">
                                OpenAI API Key
                                <a href="https://platform.openai.com/api-keys" target="_blank" class="help-link">Get one here ‚Üí</a>
                            </label>
                            <input 
                                type="password" 
                                id="apiKey" 
                                class="setting-input" 
                                placeholder="sk-..."
                            >
                            <span class="setting-hint">üîê Your key stays in your browser, never sent to our servers</span>
                        </div>

                        <button id="compressBtn" class="btn btn-large btn-primary" disabled>
                            <span class="btn-icon">‚ú®</span>
                            Compress Conversation
                        </button>

                        <div class="info-box">
                            <strong>üí° Pro Tip:</strong> The more context you provide, the better the compression. Include your entire conversation for best results.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading Section -->
            <div class="loading-container" id="loadingSection" style="display: none;">
                <div class="loading-spinner"></div>
                <h2>Compressing Your Conversation...</h2>
                <p id="loadingText">Analyzing conversation structure...</p>
                <div class="loading-progress">
                    <div class="loading-bar" id="loadingBar"></div>
                </div>

                <!-- Token Metrics During Loading -->
                <div class="token-metrics show" id="tokenMetricsLoading">
                    <div class="metric-card">
                        <div class="metric-label">Input Tokens</div>
                        <div class="metric-value" id="inputTokensDisplay">-</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Estimated Output</div>
                        <div class="metric-value" id="estimatedOutputDisplay">-</div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-container" id="resultsSection" style="display: none;">
                <div class="results-header">
                    <h2>‚ú® Your Compressed Summary</h2>
                </div>

                <!-- Token Metrics Display -->
                <div class="token-metrics show">
                    <div class="metric-card">
                        <div class="metric-label">Original</div>
                        <div class="metric-value" id="originalTokensResult">0</div>
                        <div class="metric-subtext">tokens</div>
                    </div>
                    <div class="metric-card success">
                        <div class="metric-label">Compressed</div>
                        <div class="metric-value" id="compressedTokensResult">0</div>
                        <div class="metric-subtext">tokens</div>
                    </div>
                    <div class="metric-card success">
                        <div class="metric-label">Reduction</div>
                        <div class="metric-value" id="reductionPercentDisplay">0</div>
                        <div class="metric-subtext">% smaller</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">You Saved</div>
                        <div class="metric-value" id="tokensSaved">0</div>
                        <div class="metric-subtext">tokens</div>
                    </div>
                </div>

                <!-- Compression Meter -->
                <div class="compression-meter-container show">
                    <div class="meter-title">
                        Compression Ratio
                        <span class="meter-percentage" id="compressionPercentage">
                            0%
                            <span>‚Üí</span>
                        </span>
                    </div>
                    <div class="meter-labels">
                        <span>Original Size</span>
                        <span>Compressed Size</span>
                    </div>
                    <div class="meter-bar-background">
                        <div class="meter-bar-fill" id="meterBarFill" style="width: 100%;"></div>
                    </div>
                    <div class="meter-stats">
                        <div class="stat-item">
                            <div class="stat-label">Compression Level</div>
                            <div class="stat-value" id="compressionLevel">Balanced</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Estimated Cost Saved</div>
                            <div class="stat-value savings" id="costSaved">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Original Word Count</div>
                            <div class="stat-value" id="originalWords">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Compressed Word Count</div>
                            <div class="stat-value" id="compressedWords">0</div>
                        </div>
                    </div>
                </div>

                <div class="results-content">
                    <div class="compressed-output">
                        <div class="output-header">
                            <span class="output-label">Compressed Summary</span>
                            <button id="copyBtn" class="btn btn-secondary btn-small">
                                <span class="btn-icon">üìã</span>
                                Copy to Clipboard
                            </button>
                        </div>
                        <div id="compressedText" class="output-text"></div>
                    </div>

                    <div class="results-actions">
                        <button id="downloadBtn" class="btn btn-secondary">
                            <span class="btn-icon">üíæ</span>
                            Download as .txt
                        </button>
                        <button id="newCompressionBtn" class="btn btn-primary">
                            <span class="btn-icon">üìÑ</span>
                            Compress Another
                        </button>
                    </div>

                    <div class="usage-guide">
                        <h3>How to Use This Summary</h3>
                        <ol>
                            <li>Copy the compressed summary above</li>
                            <li>Open a new conversation in your AI chatbot</li>
                            <li>Paste this message:
                                <div class="code-block">Hi! I'm continuing a conversation. Here's the context:

[PASTE COMPRESSED SUMMARY]

Please continue helping me from where we left off.</div>
                            </li>
                            <li>Your AI now has full context without reading thousands of words!</li>
                        </ol>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <h2 class="section-title">Common Questions</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h3>What are tokens?</h3>
                    <p>Tokens are how AI measures text. Roughly: 1,000 words = 1,300 tokens. The compression meter shows how many tokens you saved!</p>
                </div>
                <div class="faq-item">
                    <h3>Why do I need an API key?</h3>
                    <p>The compression uses AI (GPT-4o-mini) to intelligently extract key information. You can use your own OpenAI API key (costs ~$0.002 per compression) or pay us to handle it.</p>
                </div>
                <div class="faq-item">
                    <h3>Is my conversation private?</h3>
                    <p>Yes! If you use your own API key, your conversation goes directly from your browser to OpenAI. We never see or store it. If you use our service, it's processed and immediately deleted.</p>
                </div>
                <div class="faq-item">
                    <h3>What AI services are supported?</h3>
                    <p>All of them! ChatGPT, Claude, DeepSeek, Gemini, Perplexity, or any AI chatbot. The compressed summary works with any platform.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="logo">
                        <span class="logo-icon">üí¨</span>
                        <span class="logo-text">MoreChat.ai</span>
                    </div>
                    <p class="footer-tagline">Never lose context in AI conversations</p>
                </div>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="mailto:hello@morechat.ai">Contact</a>
                    <a href="#privacy">Privacy</a>
                    <a href="#terms">Terms</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 MoreChat.ai. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Token counting function (simplified, works in browser)
        function estimateTokens(text) {
            // Rough approximation: ~1.3 tokens per word on average
            const words = text.trim().split(/\s+/).length;
            return Math.round(words * 1.3);
        }

        // Update token count as user types
        document.getElementById('conversationInput').addEventListener('input', function() {
            const tokens = estimateTokens(this.value);
            document.getElementById('tokenCount').textContent = tokens.toLocaleString() + ' tokens';
        });
    </script>
</body>
</html>
